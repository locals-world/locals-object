<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="locals-objectlayer.html">

<!--
An element providing a solution to no problem in particular.

Example:

    <locals-object></locals-object>

Example:

    <locals-object>
      <h2>Hello locals-object</h2>
    </locals-object>

@demo demo/index.html
@hero hero.svg
-->

<dom-module id="locals-object">
  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
      }


      .absolutepos {
        position: absolute;
        width: 400px;
        height: 400px;        
      }


      locals-objectlayer {
        width: 100%;
        height: 100%;
        border: 1px solid red; 
      }


    </style>

    <template is="dom-if" if="{{isMode(mode,'edit')}}">
      <button>show controls</button>
    </template>
    <button on-tap="toEdit">to edit</button>

    <template is="dom-repeat" items="{{config.layers}}" >
    <div class="absolutepos">
      <locals-objectlayer id="layer_{{index}}" options="{{item.options}}" selected="{{_getconfigindex(index)}}" editmode="{{isMode(mode,'edit')}}"></locals-objectlayer>
    </div>
    </template>   

  </template>
  <script>
    Polymer({
      is: 'locals-object',

      properties: {
        /**
         * `fancy` indicates that the element should don a monocle and tophat,
         * while checking its pocket watch.
         */
        config: {
          type: Object,
          notify: true
        },
        mode: {
          type:String,
          value: "view"
        }

      },

      observers: [
        'setconfigUpdate(config.objectconfig.splices)'
      ],

      _getconfigindex: function(index){
        //onsole.log('f called');
        return this.config.objectconfig[index];
      },
      setconfigUpdate: function(changeRecord){
        console.log('setconfigUpdate',changeRecord);

      },

      // Element Lifecycle

      ready: function() {
      },

      attached: function() {

      },

      detached: function() {
      },

      isMode: function(a,b){
        return a==b;
      },

      toEdit: function(){
        this.mode = "edit";
      }

      // Element Behavior

    
    });
  </script>
</dom-module>
